/*2023-10-03T11:13:57-01:00*/

/********************************************************************
 * passing_sensor_cov.c
 * 
 * generated by: plcgen 3.1.391
 ********************************************************************/

#include "cb_comp.h"
#include "cb_covs.h"
#include "iec_1131.h"

#include "passing_sensor.h"



/**************************** Variables *****************************/

CB_Index passing_sensor__num = 0;
CB_Mem_Bool *passing_sensor_sensorSupply;
CB_Mem_Bool *passing_sensor_passing;
CB_Mem_Int *passing_sensor_status_act_prod;
CB_Mem_Float *passing_sensor_m11;
CB_Mem_Float *passing_sensor_m12;
CB_Mem_Float *passing_sensor_m13;
CB_Mem_Float *passing_sensor_m14;
CB_Mem_Float *passing_sensor_m21;
CB_Mem_Float *passing_sensor_m22;
CB_Mem_Float *passing_sensor_m23;
CB_Mem_Float *passing_sensor_m24;
CB_Mem_Float *passing_sensor_m31;
CB_Mem_Float *passing_sensor_m32;
CB_Mem_Float *passing_sensor_m33;
CB_Mem_Float *passing_sensor_m34;
CB_Mem_Float *passing_sensor_m41;
CB_Mem_Float *passing_sensor_m42;
CB_Mem_Float *passing_sensor_m43;
CB_Mem_Float *passing_sensor_m44;
CB_Mem_Float *passing_sensor_px;
CB_Mem_Float *passing_sensor_py;
CB_Mem_Float *passing_sensor_pz;
CB_Mem_Float *passing_sensor_dx;
CB_Mem_Float *passing_sensor_dy;
CB_Mem_Float *passing_sensor_dz;
CB_Mem_Bool *passing_sensor_detection;
CB_Mem_Bool *passing_sensor_passingLogic;
CB_Mem_Bool *passing_sensor_d_passing;
CB_Mem_Bool *passing_sensor_v_d_passing;

/**************************** Variables *****************************/

#define sensorSupply (passing_sensor_sensorSupply->CB_current_value)
#define passing (passing_sensor_passing->CB_current_value)
#define status_act_prod (passing_sensor_status_act_prod->CB_current_value)
#define m11 (passing_sensor_m11->CB_current_value)
#define m12 (passing_sensor_m12->CB_current_value)
#define m13 (passing_sensor_m13->CB_current_value)
#define m14 (passing_sensor_m14->CB_current_value)
#define m21 (passing_sensor_m21->CB_current_value)
#define m22 (passing_sensor_m22->CB_current_value)
#define m23 (passing_sensor_m23->CB_current_value)
#define m24 (passing_sensor_m24->CB_current_value)
#define m31 (passing_sensor_m31->CB_current_value)
#define m32 (passing_sensor_m32->CB_current_value)
#define m33 (passing_sensor_m33->CB_current_value)
#define m34 (passing_sensor_m34->CB_current_value)
#define m41 (passing_sensor_m41->CB_current_value)
#define m42 (passing_sensor_m42->CB_current_value)
#define m43 (passing_sensor_m43->CB_current_value)
#define m44 (passing_sensor_m44->CB_current_value)
#define px (passing_sensor_px->CB_current_value)
#define py (passing_sensor_py->CB_current_value)
#define pz (passing_sensor_pz->CB_current_value)
#define dx (passing_sensor_dx->CB_current_value)
#define dy (passing_sensor_dy->CB_current_value)
#define dz (passing_sensor_dz->CB_current_value)
#define detection (passing_sensor_detection->CB_current_value)
#define passingLogic (passing_sensor_passingLogic->CB_current_value)
#define d_passing (passing_sensor_d_passing->CB_current_value)
#define v_d_passing (passing_sensor_v_d_passing->CB_current_value)


/************************ Components offsets ************************/


/********************* Initialization function **********************/

int _tri_chain__passing_sensor_init(void)
{
	(passing_sensor_sensorSupply)->CB_current_value = 1; /*sensorSupply*/
	(self.Float+0)->CB_current_value = 1.0; /*m11*/
	(self.Float+5)->CB_current_value = 1.0; /*m22*/
	(self.Float+10)->CB_current_value = 1.0; /*m33*/
	(self.Float+15)->CB_current_value = 1.0; /*m44*/
	(self.Bool+1)->CB_current_value = 1; /*passingLogic*/
	(self.Bool+3)->CB_current_value = 1; /*v_d_passing*/
	self.Bool+=4;
	self.Int+=1;
	self.Float+=22;


	return 0;
}


/************************ Behavior function *************************/

int tri_chain__passing_sensor(void)
{
	static char *__comp_name = "tri_chain.passing_sensor";
	if (exec_term_node(self_num)) {

		/*********************** Internals variables ************************/

		passing_sensor_status_act_prod = self.Int+0;
		passing_sensor_m11 = self.Float+0;
		passing_sensor_m12 = self.Float+1;
		passing_sensor_m13 = self.Float+2;
		passing_sensor_m14 = self.Float+3;
		passing_sensor_m21 = self.Float+4;
		passing_sensor_m22 = self.Float+5;
		passing_sensor_m23 = self.Float+6;
		passing_sensor_m24 = self.Float+7;
		passing_sensor_m31 = self.Float+8;
		passing_sensor_m32 = self.Float+9;
		passing_sensor_m33 = self.Float+10;
		passing_sensor_m34 = self.Float+11;
		passing_sensor_m41 = self.Float+12;
		passing_sensor_m42 = self.Float+13;
		passing_sensor_m43 = self.Float+14;
		passing_sensor_m44 = self.Float+15;
		passing_sensor_px = self.Float+16;
		passing_sensor_py = self.Float+17;
		passing_sensor_pz = self.Float+18;
		passing_sensor_dx = self.Float+19;
		passing_sensor_dy = self.Float+20;
		passing_sensor_dz = self.Float+21;
		passing_sensor_detection = self.Bool+0;
		passing_sensor_passingLogic = self.Bool+1;
		passing_sensor_d_passing = self.Bool+2;
		passing_sensor_v_d_passing = self.Bool+3;

		/********************* Pre-conditions execution *********************/

		/*no Pre-conditions*/

		/************************ Actor Myself init *************************/

		setMyselfFor(self_num);

		/************************ Behavior execution ************************/

		{
			/* ----------------------------------------------------------------	*/
			/* Type : Model of Operative Behaviour					*/
			/* Category :  Sensors							*/
			/* Author : Dassault Systemes						*/
			/* Update date : June 2018							*/
			/* ----------------------------------------------------------------	*/
			/* This module simulates the bahaviour of a  passing sensor 		*/
			/*	for products.								*/
			/* This module is an "actor".						*/
			/* If it interacts with a product, this latter will acts on the	*/
			/*	detection variable .							*/
			/* -----------------------------------------------------------------	*/

			/* -----------------------------------------------------------------	*/
			/* "cptpass" module can be dragged in rotation or translation.	*/
			/*	Then position and dimension variables can changed.		*/
			/*	Then theses variables must be initialized from the data 	*/
			/*	which are stored as parameters.					*/
			/* -----------------------------------------------------------------	*/

			if (d_passing) passing = v_d_passing;
			else
				if ( sensorSupply ) passing=(detection ^ ! passingLogic);
				else passing = 0;

			detection=0;
		}

		CB_post_bool(passing_sensor_passing);

		/******************** Post-conditions execution *********************/

		/*no Post-conditions*/
	}

	/*************************** self update ****************************/

	self.Bool += 4;
	self.Int += 1;
	self.Float += 22;

	return 0;
}

