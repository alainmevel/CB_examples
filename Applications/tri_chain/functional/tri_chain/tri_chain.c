/*2023-10-03T11:13:58-01:00*/

/********************************************************************
 * tri_chain.c
 * 
 * generated by: plcgen 3.1.391
 ********************************************************************/

#include "cb_comp.h"
#include "iec_1131.h"

#include "tri_chain.h"
#include "tri_chain/functional/cp_trich/cp_trich.h"
#include "tri_chain/functional/op_trich/op_trich.h"


/**************************** Variables *****************************/

CB_Index tri_chain__num = 0;

/**************************** Variables *****************************/



/************************ Components offsets ************************/

static CB_Offset tri_chain__tri_chain_offset_cp_trichain;
static CB_Offset tri_chain__tri_chain_offset_op_trichain;
static CB_Offset tri_chain__tri_chain_offset__end = {0, 0, 0, 0};


/********************* Initialization function **********************/

int _tri_chain__tri_chain_init(void)
{
	CB_Object __start = self;
	self.Bool+=22;

	/*initialize child cp_trichain (tri_chain.cp_trich):*/
	self_num++;
	tri_chain__tri_chain_offset_cp_trichain.Bool = self.Bool - __start.Bool;
	tri_chain__tri_chain_offset_cp_trichain.Int = self.Int - __start.Int;
	tri_chain__tri_chain_offset_cp_trichain.Float = self.Float - __start.Float;
	tri_chain__tri_chain_offset_cp_trichain.Char = self.Char - __start.Char;
	cp_trich_ON = __start.Bool+0; /*tri_chain__cn_22*/
	cp_trich_run1 = __start.Bool+1; /*tri_chain__cn_21*/
	cp_trich_startSensor1 = __start.Bool+2; /*tri_chain__cn_20*/
	cp_trich_endSensor1 = __start.Bool+3; /*tri_chain__cn_19*/
	cp_trich_run2 = __start.Bool+4; /*tri_chain__cn_18*/
	cp_trich_startSensor2 = __start.Bool+5; /*tri_chain__cn_17*/
	cp_trich_endSensor2 = __start.Bool+6; /*tri_chain__cn_16*/
	cp_trich_run3 = __start.Bool+7; /*tri_chain__cn_15*/
	cp_trich_startSensor3 = __start.Bool+8; /*tri_chain__cn_14*/
	cp_trich_endSensor3 = __start.Bool+9; /*tri_chain__cn_13*/
	cp_trich_sensor1 = __start.Bool+10; /*tri_chain__cn_12*/
	cp_trich_sensor2 = __start.Bool+11; /*tri_chain__cn_11*/
	cp_trich_sensor3 = __start.Bool+12; /*tri_chain__cn_10*/
	cp_trich_endSensor = __start.Bool+13; /*tri_chain__cn_9*/
	cp_trich_endSensor4 = __start.Bool+14; /*tri_chain__cn_8*/
	cp_trich_mvt1 = __start.Bool+15; /*tri_chain__cn_7*/
	cp_trich_mvt2 = __start.Bool+16; /*tri_chain__cn_6*/
	cp_trich_mvt3 = __start.Bool+17; /*tri_chain__cn_5*/
	cp_trich_moveToLeft = __start.Bool+19; /*tri_chain__cn_3*/
	cp_trich_moveToRight = __start.Bool+20; /*tri_chain__cn_2*/
	cp_trich_chainMvt = __start.Bool+21; /*tri_chain__cn_1*/
	cp_trich_mvt4 = __start.Bool+18; /*tri_chain__cn_4*/
	_tri_chain__cp_trich_init();

	/*initialize child op_trichain (tri_chain.op_trich):*/
	self_num++;
	tri_chain__tri_chain_offset_op_trichain.Bool = self.Bool - __start.Bool;
	tri_chain__tri_chain_offset_op_trichain.Int = self.Int - __start.Int;
	tri_chain__tri_chain_offset_op_trichain.Float = self.Float - __start.Float;
	tri_chain__tri_chain_offset_op_trichain.Char = self.Char - __start.Char;
	op_trich_mvt1 = __start.Bool+15; /*tri_chain__cn_7*/
	op_trich_mvt2 = __start.Bool+16; /*tri_chain__cn_6*/
	op_trich_mvt3 = __start.Bool+17; /*tri_chain__cn_5*/
	op_trich_mvt4 = __start.Bool+18; /*tri_chain__cn_4*/
	op_trich_moveToLeft = __start.Bool+19; /*tri_chain__cn_3*/
	op_trich_moveToRight = __start.Bool+20; /*tri_chain__cn_2*/
	op_trich_chainMvt = __start.Bool+21; /*tri_chain__cn_1*/
	op_trich_ON = __start.Bool+0; /*tri_chain__cn_22*/
	op_trich_run1 = __start.Bool+1; /*tri_chain__cn_21*/
	op_trich_startSensor1 = __start.Bool+2; /*tri_chain__cn_20*/
	op_trich_endSensor1 = __start.Bool+3; /*tri_chain__cn_19*/
	op_trich_run2 = __start.Bool+4; /*tri_chain__cn_18*/
	op_trich_startSensor2 = __start.Bool+5; /*tri_chain__cn_17*/
	op_trich_endSensor2 = __start.Bool+6; /*tri_chain__cn_16*/
	op_trich_run3 = __start.Bool+7; /*tri_chain__cn_15*/
	op_trich_startSensor3 = __start.Bool+8; /*tri_chain__cn_14*/
	op_trich_endSensor3 = __start.Bool+9; /*tri_chain__cn_13*/
	op_trich_endSensor4 = __start.Bool+14; /*tri_chain__cn_8*/
	op_trich_sensor1 = __start.Bool+10; /*tri_chain__cn_12*/
	op_trich_sensor2 = __start.Bool+11; /*tri_chain__cn_11*/
	op_trich_sensor3 = __start.Bool+12; /*tri_chain__cn_10*/
	op_trich_endSensor = __start.Bool+13; /*tri_chain__cn_9*/
	_tri_chain__op_trich_init();

	tri_chain__tri_chain_offset__end.Bool = self.Bool - __start.Bool;
	tri_chain__tri_chain_offset__end.Int = self.Int - __start.Int;
	tri_chain__tri_chain_offset__end.Float = self.Float - __start.Float;
	tri_chain__tri_chain_offset__end.Char = self.Char - __start.Char;

	return 0;
}


/************************ Behavior function *************************/

int tri_chain__tri_chain(void)
{
	CB_Object __start = self;
	int __ret;
	if (exec_mac_node(self_num)) {

		/*********************** Internals variables ************************/

																																												
		/********************* Pre-conditions execution *********************/

		/*no Pre-conditions*/

		/************************ Behavior execution ************************/

		{
			self.Bool = __start.Bool + tri_chain__tri_chain_offset_cp_trichain.Bool;
			self.Int = __start.Int + tri_chain__tri_chain_offset_cp_trichain.Int;
			self.Float = __start.Float + tri_chain__tri_chain_offset_cp_trichain.Float;
			self.Char = __start.Char + tri_chain__tri_chain_offset_cp_trichain.Char;

			/********************** cp_trichain execution ***********************/

			self_num++;
			if (cp_trich__num != self_num) {
				cp_trich__num = self_num;
				cp_trich_ON = __start.Bool+0; /*tri_chain__cn_22*/
				cp_trich_run1 = __start.Bool+1; /*tri_chain__cn_21*/
				cp_trich_startSensor1 = __start.Bool+2; /*tri_chain__cn_20*/
				cp_trich_endSensor1 = __start.Bool+3; /*tri_chain__cn_19*/
				cp_trich_run2 = __start.Bool+4; /*tri_chain__cn_18*/
				cp_trich_startSensor2 = __start.Bool+5; /*tri_chain__cn_17*/
				cp_trich_endSensor2 = __start.Bool+6; /*tri_chain__cn_16*/
				cp_trich_run3 = __start.Bool+7; /*tri_chain__cn_15*/
				cp_trich_startSensor3 = __start.Bool+8; /*tri_chain__cn_14*/
				cp_trich_endSensor3 = __start.Bool+9; /*tri_chain__cn_13*/
				cp_trich_sensor1 = __start.Bool+10; /*tri_chain__cn_12*/
				cp_trich_sensor2 = __start.Bool+11; /*tri_chain__cn_11*/
				cp_trich_sensor3 = __start.Bool+12; /*tri_chain__cn_10*/
				cp_trich_endSensor = __start.Bool+13; /*tri_chain__cn_9*/
				cp_trich_endSensor4 = __start.Bool+14; /*tri_chain__cn_8*/
				cp_trich_mvt1 = __start.Bool+15; /*tri_chain__cn_7*/
				cp_trich_mvt2 = __start.Bool+16; /*tri_chain__cn_6*/
				cp_trich_mvt3 = __start.Bool+17; /*tri_chain__cn_5*/
				cp_trich_moveToLeft = __start.Bool+19; /*tri_chain__cn_3*/
				cp_trich_moveToRight = __start.Bool+20; /*tri_chain__cn_2*/
				cp_trich_chainMvt = __start.Bool+21; /*tri_chain__cn_1*/
				cp_trich_mvt4 = __start.Bool+18; /*tri_chain__cn_4*/
			}
			__ret = tri_chain__cp_trich();
			if (__ret != 0) {
				return __ret; /*child execution failure*/
			}

			/********************** op_trichain execution ***********************/

			self_num++;
			if (op_trich__num != self_num) {
				op_trich__num = self_num;
				op_trich_mvt1 = __start.Bool+15; /*tri_chain__cn_7*/
				op_trich_mvt2 = __start.Bool+16; /*tri_chain__cn_6*/
				op_trich_mvt3 = __start.Bool+17; /*tri_chain__cn_5*/
				op_trich_mvt4 = __start.Bool+18; /*tri_chain__cn_4*/
				op_trich_moveToLeft = __start.Bool+19; /*tri_chain__cn_3*/
				op_trich_moveToRight = __start.Bool+20; /*tri_chain__cn_2*/
				op_trich_chainMvt = __start.Bool+21; /*tri_chain__cn_1*/
				op_trich_ON = __start.Bool+0; /*tri_chain__cn_22*/
				op_trich_run1 = __start.Bool+1; /*tri_chain__cn_21*/
				op_trich_startSensor1 = __start.Bool+2; /*tri_chain__cn_20*/
				op_trich_endSensor1 = __start.Bool+3; /*tri_chain__cn_19*/
				op_trich_run2 = __start.Bool+4; /*tri_chain__cn_18*/
				op_trich_startSensor2 = __start.Bool+5; /*tri_chain__cn_17*/
				op_trich_endSensor2 = __start.Bool+6; /*tri_chain__cn_16*/
				op_trich_run3 = __start.Bool+7; /*tri_chain__cn_15*/
				op_trich_startSensor3 = __start.Bool+8; /*tri_chain__cn_14*/
				op_trich_endSensor3 = __start.Bool+9; /*tri_chain__cn_13*/
				op_trich_endSensor4 = __start.Bool+14; /*tri_chain__cn_8*/
				op_trich_sensor1 = __start.Bool+10; /*tri_chain__cn_12*/
				op_trich_sensor2 = __start.Bool+11; /*tri_chain__cn_11*/
				op_trich_sensor3 = __start.Bool+12; /*tri_chain__cn_10*/
				op_trich_endSensor = __start.Bool+13; /*tri_chain__cn_9*/
			}
			__ret = tri_chain__op_trich();
			if (__ret != 0) {
				return __ret; /*child execution failure*/
			}

		}


		/******************** Post-conditions execution *********************/

		/*no Post-conditions*/
	}

	/*************************** self update ****************************/

	self.Bool = __start.Bool + tri_chain__tri_chain_offset__end.Bool;
	self.Int = __start.Int + tri_chain__tri_chain_offset__end.Int;
	self.Float = __start.Float + tri_chain__tri_chain_offset__end.Float;
	self.Char = __start.Char + tri_chain__tri_chain_offset__end.Char;

	return 0;
}

