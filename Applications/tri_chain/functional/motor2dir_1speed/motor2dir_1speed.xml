<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Generator: ControlBuild -->

<project xmlns="http://www.plcopen.org/xml/tc6_0201.xsd" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.plcopen.org/xml/tc6_0201.xsd TC6_XML_V10.xsd">
	<fileHeader companyName="Dassault Syst&#232;mes" productName="ControlBuild" productVersion="2024x" creationDateTime="2023-10-03T11:13:54-01:00" />
	<contentHeader name="motor2dir_1speed">
		<coordinateInfo>
			<fbd>
				<scaling x="100" y="100" />
			</fbd>
			<ld>
				<scaling x="100" y="100" />
			</ld>
			<sfc>
				<scaling x="32" y="8" />
			</sfc>
		</coordinateInfo>
	</contentHeader>
	<types>
		<dataTypes />
		<pous>
			<pou name="tri_chain.motor2dir_1speed" pouType="functionBlock">
				<interface>
					<inputVars>
						<variable name="forward">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>3ace4140-5c5e-476f-a03e-cb9a4d0072d5</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="backward">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>18b5a810-cb1f-4656-b2b7-17cb994e68d1</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="cmdSupply">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="true" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>85282df8-2924-40dc-b62c-aa57e762bcdd</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="sensorSupply">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="true" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>9e40b0b9-1306-4521-9b27-466d50c653f6</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="voltage380">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="true" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>added9e1-f262-4238-aa1c-4460a0510782</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>inputVars</value>
							</data>
						</addData>
					</inputVars>
					<outputVars>
						<variable name="speedVal">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>c030f082-51df-4894-8342-afaac5029464</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="speedPercent">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>4e19e292-e11f-4b5f-a03a-4e0f47bfdabd</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="thermal">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>0abdb362-d7d8-4e1d-9d2f-cf5411d2116a</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="backwardFB">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>8b56903d-3d9a-4135-bfc2-1bdfeb5fc4aa</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="forwardFB">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>19026c0d-56df-43ce-9bbf-ad9e4489f4da</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>outputVars</value>
							</data>
						</addData>
					</outputVars>
					<localVars>
						<variable name="increment">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>7dba7656-b03d-4f2f-a3e1-b54d8dbe52ae</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="memoFwd">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>7f3b4ea4-a4d1-4be2-b836-482a5a899e03</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="memoBwd">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>6c7a37fe-11ec-4892-9cd5-464e0bcfad2f</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="forwardState">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>dcd10ac0-3644-41c6-a2c0-d0ad82829341</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="backwardState">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>e1aada0a-4442-4690-a000-6dcf652b9e92</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="wantedSpeed">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>dda8a65e-f278-4494-b5d7-3a35c9f5e857</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>localVars</value>
							</data>
						</addData>
					</localVars>
					<localVars constant="true">
						<variable name="nominalSpeed">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="5000.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>5714b301-486e-457d-9627-e08a16d13083</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="nominalTime">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.5" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>f9bbc44d-3e2a-49de-a3c4-414ed76972be</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="thermalLogic">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>3c9886b4-37a6-4c00-8527-93f9489c2387</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="fwdFbLogic">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="true" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>0ed676fa-dbf8-4823-b893-cce2f0d8ea32</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="bwdFbLogic">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="true" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>0843082c-2af8-4a78-8261-ff7c44af2a49</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>parameterVars</value>
							</data>
						</addData>
					</localVars>
					<localVars>
						<variable name="d_locking">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>0bceafbc-bb5d-45e3-9d70-46580e79c1ba</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="v_d_locking">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>4ed36d52-242a-4e43-9123-f127f6c6d59b</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="d_electrical">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>a60056c7-0a6a-470a-9119-17334b22d27c</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="v_d_electrical">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>0b28bc4c-72bf-4d63-b613-62f6ee152a56</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="d_backwardFB">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>637771b7-3a83-42ed-b9bf-030a4f83b176</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="v_d_backwardFB">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>e5800c80-37d0-44c5-928c-e2701c0bbcd5</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="d_forwardFB">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>35051509-e470-4f49-8c89-8e5b912d5525</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="v_d_forwardFB">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>ab9b0f92-179a-4e5a-bde9-e354df7d5de0</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>faultVars</value>
							</data>
						</addData>
					</localVars>
					<addData>
					</addData>
				</interface>
				<actions>
					<action name="C_source_code">
						<body>
							<ST>/* ----------------------------------------------------------------&#9;*/
/* Type : Model of Operative Behaviour&#9;&#9;&#9;&#9;&#9;*/
/* Category :  Associations - motors&#9;&#9;&#9;&#9;&#9;*/
/* Author : Dassault Systemes&#9;&#9;&#9;&#9;&#9;&#9;*/
/* Update date : June 2018&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
/* This module simulates a motor with 2 directions and 1 speed&#9;*/
/* and its electrical control logic.&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/


/* ----------------------------------------------------------------&#9;*/
/* Management of orders from Control Part&#9;&#9;&#9;&#9;&#9;*/
/*&#9;if there is no power supply for command &#9;&#9;&#9;&#9;*/
/*     &#9;the contactors don't understand the control order&#9;*/
/*&#9;The contactors cannot be active in the same time&#9;&#9;*/
/*&#9; &#9;(mechanical security).&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (forward &amp;&amp; !memoBwd &amp;&amp; cmdSupply) memoFwd = 1;
if (!forward || !cmdSupply || d_electrical) memoFwd = 0;
if (!memoFwd &amp;&amp; backward &amp;&amp; cmdSupply) memoBwd = 1;
if (!backward || !cmdSupply || d_electrical) memoBwd = 0;

/* ----------------------------------------------------------------&#9;*/
/* Calculation of the on-state of contactor&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
forwardState= memoFwd &amp; voltage380;
backwardState = memoBwd &amp; voltage380;


/* ----------------------------------------------------------------&#9;*/
/* Management of the speed ramp&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (d_locking)  speedVal = v_d_locking;
else {
&#9;/* Compute the increment of translation according to the simulation clock&#9;*/
&#9;if (nominalTime &gt; 0.0)
&#9;&#9;increment = (nominalSpeed / nominalTime) * (CLOCK_PERIOD/1000000.0);

&#9;/* Compute the wanted speed&#9;*/
&#9;if (forwardState) wantedSpeed = nominalSpeed;
&#9;if (backwardState) wantedSpeed = nominalSpeed * -1.0;
&#9;if (! forwardState &amp;&amp; ! backwardState) wantedSpeed = 0.0;

&#9;/* Compute the speed ramp&#9;*/
&#9;if ( speedVal &lt; wantedSpeed ) {
&#9;&#9;speedVal += increment;
&#9;&#9;if (speedVal &gt; wantedSpeed)  speedVal = wantedSpeed;
&#9;}
&#9;if ( speedVal &gt; wantedSpeed ) {
&#9;&#9;speedVal -= increment;
&#9;&#9;if (speedVal &lt; wantedSpeed)  speedVal = wantedSpeed;
&#9;}
}

/* ----------------------------------------------------------------&#9;*/
/* Compute the percentage between the current and nominal speed&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (nominalSpeed != 0.0) 
&#9;speedPercent = ((speedVal/nominalSpeed)*100);


/* ----------------------------------------------------------------&#9;*/
/* Management of the thermal feedback&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (d_electrical) thermal=v_d_electrical;
else
&#9;if (sensorSupply) thermal= ! thermalLogic;
&#9;else thermal=0;

/* ----------------------------------------------------------------&#9;*/
/* Management of feedback to Control Part&#9;&#9;&#9;&#9;&#9;*/
/*     if a fault is required, the contactor feed-back &#9;&#9;*/
/*&#9;&#9; takes a preset state.&#9;&#9;&#9;&#9;&#9;*/
/*&#9;if there is no power supply for sensors &#9;&#9;&#9;&#9;*/
/*         contactor feed-back returns nothing&#9;&#9;&#9;&#9;*/
/*     else contactor feed-back returns the contactor state combined&#9;*/
/*&#9;    with wiring logic.&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (d_forwardFB) forwardFB=v_d_forwardFB;
else
&#9;if (sensorSupply) forwardFB=(memoFwd ^ ! fwdFbLogic);
&#9;else forwardFB=0;

if (d_backwardFB) backwardFB=v_d_backwardFB;
else
&#9;if (sensorSupply) backwardFB=(memoBwd ^ ! bwdFbLogic);
&#9;else backwardFB=0;

</ST>
						</body>
					</action>
				</actions>
				<addData>
					<data name="Geensys.CB.INSTANCE_NAMIMG_PATTERN" handleUnknown="preserve">
						<value></value>
					</data>
					<data name="Geensys.CB.COMMENTS_PATTERN" handleUnknown="preserve">
						<value>This module simulates the behaviour of a motor with 2 directions and 1speed and its electrical control logic.</value>
					</data>
				</addData>
				<documentation>
					<xhtml:pre>This module simulates the behaviour of a motor with 2 directions and 1speed and its electrical control logic.</xhtml:pre>
				</documentation>
			</pou>
		</pous>
	</types>
	<instances>
		<configurations />
	</instances>
</project>