<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Generator: ControlBuild -->

<project xmlns="http://www.plcopen.org/xml/tc6_0201.xsd" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.plcopen.org/xml/tc6_0201.xsd TC6_XML_V10.xsd">
	<fileHeader companyName="Dassault Syst&#232;mes" productName="ControlBuild" productVersion="2024x" creationDateTime="2023-10-03T11:13:20-01:00" />
	<contentHeader name="cam_1dir_2speed">
		<coordinateInfo>
			<fbd>
				<scaling x="100" y="100" />
			</fbd>
			<ld>
				<scaling x="100" y="100" />
			</ld>
			<sfc>
				<scaling x="32" y="8" />
			</sfc>
		</coordinateInfo>
	</contentHeader>
	<types>
		<dataTypes />
		<pous>
			<pou name="equipment_library.cam_1dir_2speed" pouType="functionBlock">
				<interface>
					<inputVars>
						<variable name="highSpeed">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>ab783454-0cc2-4b2f-901e-25341c476fa7</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<variable name="lowSpeed">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>b06ede5d-800f-48b7-bf62-24d68b036aac</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>inputVars</value>
							</data>
						</addData>
					</inputVars>
					<outputVars>
						<variable name="positionTranslat">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>f48101fe-7889-4cc0-80a5-624c503a198a</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<variable name="percentTranslat">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>ae8e3afe-556f-454b-8466-a2b9ac527082</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<variable name="incrementTranslat">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>75b55b81-3605-4aeb-9628-7ed472ab2b3e</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.group" handleUnknown="preserve">
								<value>translation</value>
							</data>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>outputVars</value>
							</data>
						</addData>
					</outputVars>
					<outputVars>
						<variable name="angleRotationDeg">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>e4248af9-166a-4fa8-a88a-c25153c15b3f</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<variable name="angleRotationRad">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>4a987d27-64d9-447f-bff0-05362edd5411</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.group" handleUnknown="preserve">
								<value>rotation</value>
							</data>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>outputVars</value>
							</data>
						</addData>
					</outputVars>
					<localVars>
						<variable name="firstCycle">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>54a1e468-f066-466e-8339-94e337c5766b</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="incrementRotation">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>8e6bdec1-fb81-42c4-83ed-624968cfc779</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="memoHs">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>722c6c61-0d07-4907-a873-e7e7bb0388f3</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="memoLs">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>d80cb585-7d17-4fa1-990a-8ac659433887</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="oldPosition">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>d50126a7-4d21-4a26-8960-671f6b209581</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>localVars</value>
							</data>
						</addData>
					</localVars>
					<localVars constant="true">
						<variable name="maxTranslat">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="1000.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>775131e2-5ea5-4cd6-b21e-05ebbd001311</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="highSpeedVal">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="2.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>5f4c0ada-19eb-4a94-b50f-47ff7c782ecf</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="initTranslat">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>429831d3-b7c2-4c81-809d-21ff9ae96bf1</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="minTranslat">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>7c179354-9bb6-4e2a-ae21-f412f70253d2</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="lowSpeedVal">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="1.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>1c231dd9-5878-4e08-9a24-3f251bf4bd2a</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>parameterVars</value>
							</data>
						</addData>
					</localVars>
					<localVars>
						<variable name="d_locking">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>b10eaf8f-6234-451b-9caf-27e6489cd376</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="v_d_locking">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>8103ed1c-3e7c-42e2-b5f7-7e6e2dc837f6</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>faultVars</value>
							</data>
						</addData>
					</localVars>
					<addData>
						<data name="Geensys.CB.groupOut" handleUnknown="preserve">
							<value>translation,,rotation,</value>
						</data>
					</addData>
				</interface>
				<actions>
					<action name="C_source_code">
						<body>
							<ST>/* ----------------------------------------------------------------&#9;*/
/* Type : Model of Operative Behaviour&#9;&#9;&#9;&#9;&#9;*/
/* Category :  Actuators&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* Author : Dassault Systemes&#9;&#9;&#9;&#9;&#9;&#9;*/
/* Update date : June 2018&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
/* This module simulate the behaviour of a cam with 1 direction and&#9;*/
/* 2 speeds.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* The position of the cam goes from minTranslat to maxTranslat with&#9;*/
/* 2 rotation speeds highSpeedVal et lowSpeedVal.&#9;&#9;&#9;*/
/*&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* nota : the starting position is forced by initTranslat.&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/

/* Declaration of variables which don't need to be visualized during simulation */
float pi=3.1415926;



/* ----------------------------------------------------------------&#9;*/
/* Initialization of the position of the cam for the first step of&#9;*/
/* simulation.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (! firstCycle) {
&#9;if (initTranslat &gt; maxTranslat) positionTranslat = maxTranslat;
&#9;else
&#9;&#9;if (initTranslat &lt; minTranslat) positionTranslat = minTranslat;
&#9;&#9;else positionTranslat = initTranslat;

&#9;firstCycle = 1;
&#9;if ((maxTranslat - minTranslat) != 0.0)
&#9;&#9;angleRotationRad = acos(1 - ((positionTranslat - minTranslat)/(maxTranslat - minTranslat)*2.0));
}

/* ----------------------------------------------------------------&#9;*/
/* Manage priorities of inputs' switching&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (highSpeed &amp;&amp; !memoLs) memoHs = 1;
if (!highSpeed) memoHs = 0;
if (!memoHs &amp;&amp; lowSpeed) memoLs= 1;
if (!lowSpeed) memoLs = 0;


/* ----------------------------------------------------------------&#9;*/
/* Rotation and translation (height of cam)&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if ((!d_locking) &amp;&amp; (memoHs || memoLs)) {

&#9;/* compute the increment of rotation according to the clock of simulation&#9;*/
&#9;if (memoHs) incrementRotation = highSpeedVal * (CLOCK_PERIOD/1000000);
&#9;if (memoLs) incrementRotation = lowSpeedVal * (CLOCK_PERIOD/1000000);

&#9;/* compute the angle of rotation (radian)&#9;*/
&#9;angleRotationRad = angleRotationRad + incrementRotation;
&#9;if (angleRotationRad &gt;= (2*pi)) {angleRotationRad -= 2*pi;}
&#9;
&#9;/* compute the position of translation&#9;*/
&#9;positionTranslat=(1 - cos(angleRotationRad))*(maxTranslat-minTranslat)/2.0 + minTranslat;
}

/* ----------------------------------------------------------------&#9;*/
/* Compute the pecentage of height between the current position&#9;*/
/* and the lowest and highest points of the cam&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
percentTranslat = (100/(maxTranslat - minTranslat)) * (positionTranslat - minTranslat)  ;
&#9;&#9;

/* ----------------------------------------------------------------&#9;*/
/* Conversion of the rotation angle from radian to degree&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
angleRotationDeg = (angleRotationRad*180)/pi;

/* ----------------------------------------------------------------&#9;*/
/* Increment of translation&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
incrementTranslat = positionTranslat - oldPosition;
oldPosition = positionTranslat;

</ST>
						</body>
					</action>
					<action name="C_header">
						<body>
							<ST>#include &lt;math.h&gt;
</ST>
						</body>
					</action>
				</actions>
				<addData>
					<data name="Geensys.CB.COMPONENT_CLASS" handleUnknown="preserve">
						<value>SIMULATION</value>
					</data>
					<data name="Geensys.CB.COMPONENT_CLASS_UUID" handleUnknown="preserve">
						<value>259d51dd-3d3f-4b47-8521-c0425150bfee</value>
					</data>
					<data name="Geensys.CB.INSTANCE_NAMIMG_PATTERN" handleUnknown="preserve">
						<value>&lt;CLASS_PATTERN&gt;</value>
					</data>
					<data name="Geensys.CB.COMMENTS_PATTERN" handleUnknown="preserve">
						<value>&lt;CLASS_PATTERN&gt;</value>
					</data>
				</addData>
				<documentation>
					<xhtml:pre>This module simulates the behaviour of a cam with 1 direction and 2 speeds (ovoid).</xhtml:pre>
				</documentation>
			</pou>
		</pous>
	</types>
	<instances>
		<configurations />
	</instances>
</project>