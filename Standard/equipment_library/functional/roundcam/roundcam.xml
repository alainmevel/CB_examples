<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Generator: ControlBuild -->

<project xmlns="http://www.plcopen.org/xml/tc6_0201.xsd" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.plcopen.org/xml/tc6_0201.xsd TC6_XML_V10.xsd">
	<fileHeader companyName="Dassault Syst&#232;mes" productName="ControlBuild" productVersion="2024x" creationDateTime="2023-10-03T11:13:15-01:00" />
	<contentHeader name="roundcam">
		<coordinateInfo>
			<fbd>
				<scaling x="100" y="100" />
			</fbd>
			<ld>
				<scaling x="100" y="100" />
			</ld>
			<sfc>
				<scaling x="32" y="8" />
			</sfc>
		</coordinateInfo>
	</contentHeader>
	<types>
		<dataTypes />
		<pous>
			<pou name="equipment_library.roundcam" pouType="functionBlock">
				<interface>
					<inputVars>
						<variable name="rotationSpeedDegS">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>2e1cc65c-ed7f-495a-9054-915a84f3f668</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>inputVars</value>
							</data>
						</addData>
					</inputVars>
					<outputVars>
						<variable name="angleRotationDeg">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>b8ea11c1-8eb7-4fe6-a546-58f13fabfcfe</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<variable name="angleRotationRad">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>02e0861a-a5d4-4fcd-9e83-7e2889b76db9</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.nameProvider" handleUnknown="preserve">
									<value>false</value>
								</data>
							</addData>
						</variable>
						<variable name="angle_modulo">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>8517748b-8689-4be5-9599-c598a2b665e2</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>outputVars</value>
							</data>
						</addData>
					</outputVars>
					<localVars>
						<variable name="firstCycle">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>78b94bf9-483e-45d4-b6c7-a4707f3b8538</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="incrementRotation">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>94ad7451-0d0b-4add-bb44-e861618210d9</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>localVars</value>
							</data>
						</addData>
					</localVars>
					<localVars constant="true">
						<variable name="initAngle">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="0.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>d9d2b8c1-1dc8-4cb4-9460-ff2d67577f90</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<variable name="modulo">
							<type>
								<REAL />
							</type>
							<initialValue>
								<simpleValue value="1000.0" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>7663dfef-db89-47e4-a05a-f63b80fd1239</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>parameterVars</value>
							</data>
						</addData>
					</localVars>
					<localVars>
						<variable name="d_locking">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>591eca1d-ba22-4613-a30a-ba2f804c8da5</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
							</addData>
						</variable>
						<variable name="v_d_locking">
							<type>
								<BOOL />
							</type>
							<initialValue>
								<simpleValue value="false" />
							</initialValue>
							<addData>
								<data name="Geensys.CB.IdentifierProperty" handleUnknown="preserve">
									<value>5fc13765-8129-488a-8a05-7c7f8212206a</value>
								</data>
								<data name="Geensys.CB.mnemonicPatternPropertyName" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
								<data name="Geensys.CB.visibility" handleUnknown="preserve">
									<value>true</value>
								</data>
								<data name="Geensys.CB.wordingPattern" handleUnknown="preserve">
									<value>&lt;CLASS_PATTERN&gt;</value>
								</data>
							</addData>
						</variable>
						<addData>
							<data name="Geensys.CB.kind" handleUnknown="preserve">
								<value>faultVars</value>
							</data>
						</addData>
					</localVars>
					<addData>
					</addData>
				</interface>
				<actions>
					<action name="C_source_code">
						<body>
							<ST>/* ----------------------------------------------------------------&#9;*/
/* Author : 3DS&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* Update date : October 2017&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
/* This module simulate the behaviour of a cam &#9;.&#9;&#9;&#9;*/
/* The position of the cam goes from 0 to 360 with&#9;*/
/* the given rotation speed.&#9;&#9;&#9;&#9;&#9;&#9;*/
/*&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* nota : - the starting position is forced by initAngle.&#9;&#9;*/
/*&#9;   - the speed setpoint can be set in&#9;&#9;&#9;&#9;*/
/*&#9;&#9;- degree per second&#9;(rotationSpeedDegS)&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/

/* Declaration of variables which don't need to be visualized during simulation */

/* ----------------------------------------------------------------&#9;*/
/* Initialization of the position of the cam for the first step of&#9;*/
/* simulation.&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if (! firstCycle) {
&#9;if (initAngle &gt; 360 ) angleRotationDeg  = 360 ;
&#9;else
&#9;&#9;if (initAngle &lt; 0) angleRotationDeg  = 0;
&#9;&#9;else angleRotationDeg  = initAngle;

&#9;firstCycle = 1;
}

/* ----------------------------------------------------------------&#9;*/
/* Rotation and translation (height of cam)&#9;&#9;&#9;&#9;*/
/* ----------------------------------------------------------------&#9;*/
if ((!d_locking) &amp;&amp; ((rotationSpeedDegS!=0.0)||(rotationSpeedDegS!=0.0))) {

&#9;/* compute the increment of rotation according to the clock of simulation&#9;*/

&#9;incrementRotation= rotationSpeedDegS * (CLOCK_PERIOD /1000000.0);
&#9;/* compute the angle of rotation (degrees)&#9;*/
&#9;angleRotationDeg = angleRotationDeg  + incrementRotation;
&#9;if (angleRotationDeg  &gt; 360 ) {angleRotationDeg  -= 360 ;}
&#9;if (angleRotationDeg  &lt; -360 ) {angleRotationDeg  += 360 ;}
}

/* Conversion deg in Radians  */&#9;&#9;
angleRotationRad = angleRotationDeg * 0.03491;
angle_modulo = (angleRotationDeg *modulo) / 360.0;
</ST>
						</body>
					</action>
				</actions>
				<addData>
					<data name="Geensys.CB.INSTANCE_NAMIMG_PATTERN" handleUnknown="preserve">
						<value></value>
					</data>
					<data name="Geensys.CB.COMMENTS_PATTERN" handleUnknown="preserve">
						<value></value>
					</data>
				</addData>
				<documentation>
					<xhtml:pre>This module simulates the behaviour of a round cam </xhtml:pre>
				</documentation>
			</pou>
		</pous>
	</types>
	<instances>
		<configurations />
	</instances>
</project>